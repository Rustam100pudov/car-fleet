# car-fleet — демонстрационный проект

Небольшой demo-проект на Laravel: выбор и бронирование служебных машин. В репозитории есть миграции, сидеры, простой API и страница для демонстрации работы (интерфейс для тестирования и показа фичи).

Язык руководства — PowerShell (Windows). Если вы используете Linux / macOS, команды похожи, только без `Start-Process` и с обычным `cp`.

---

## Быстрый старт (PowerShell)

Скопируйте и выполните по очереди в папке, куда хотите клонировать репозиторий:

```powershell
# 1) Клонировать и перейти в папку
git clone git@gitlab.com:rustik100pudov/car-fleet.git
cd car-fleet

# 2) Установить зависимости PHP
composer install

# 3) Настроить окружение
copy .env.example .env
php artisan key:generate

# 4) Если используете sqlite (проще для демо) — создать файл БД
if (!(Test-Path database\database.sqlite)) { New-Item database\database.sqlite -ItemType File }

# 5) Применить миграции и сиды (создаст демо-данные и тестовые токены)
php artisan migrate --seed

# 6) Запустить локальный сервер
php artisan serve

# 7) Открыть страницу демонстрации
Start-Process http://127.0.0.1:8000/admin/available-cars
```

Если вы используете MySQL/Postgres — отредактируйте `.env` (DB_CONNECTION, DB_DATABASE, DB_USERNAME, DB_PASSWORD) перед миграциями.

---

## Что есть на странице «Доступные автомобили»

- Селектор сотрудника — для демонстрации страница использует вспомогательный эндпоинт, который создаёт (или возвращает) пользователя и выдаёт ему временный токен (только для локальной демонстрации).
- Поля Start / End — временной интервал поездки.
- Фильтры: марка (Brand), водитель (Driver), категория.
- Кнопка «Показать доступные» — показывает машины, доступные для выбранного сотрудника и интервала.
- Кнопка «Забронировать» — создаёт бронь; внизу есть таблица «Мои брони», где можно отменить свою бронь.
- Кнопка «Сбросить все брони» — удаляет все записи о бронях (работает только в локальном режиме).

---

## Быстрая демонстрация (сценарий)

1. Откройте страницу `http://127.0.0.1:8000/admin/available-cars`.
2. Выберите сотрудника в выпадающем списке (например, `Manager User`). Страница автоматически запросит токен для этого пользователя.
3. Выберите начало и конец поездки (пример: 2025-09-01 09:00 — 2025-09-01 12:00) и нажмите «Показать доступные».
4. Список покажет все машины, доступные этому сотруднику на выбранный интервал. Нажмите «Забронировать» для любой машины.
5. После успешной брони проверьте таблицу «Мои брони» — там появится запись с данными и кнопкой «Отменить».
6. Для презентации можно показать, что при попытке забронировать ту же машину на пересекающийся интервал API вернёт ошибку и в UI появится сообщение.












